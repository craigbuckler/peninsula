/* Peninsula Hearing Care JavaScript - (C) OptimalWorks.net */
if(!owl){var owl={Version:.1};owl.UserAgent=navigator.userAgent.toLowerCase(),owl.Browser={IE:/msie/.test(owl.UserAgent)&&!/opera/.test(owl.UserAgent),Mozilla:/mozilla/.test(owl.UserAgent)&&!/(compatible|webkit)/.test(owl.UserAgent),Opera:/opera/.test(owl.UserAgent),Safari:/webkit/.test(owl.UserAgent),Konqueror:/konqueror/.test(owl.UserAgent)},owl.Browser.Version=owl.UserAgent.replace(/^.+[ox|ra|on|or][\/: ]/,""),0<=owl.Browser.Version.indexOf("msie")&&(owl.Browser.Version=owl.Browser.Version.replace(/^.+[ie][\/: ]/,"")),owl.Browser.Version=owl.Browser.Version.replace(/([^\d.].+$)/,""),owl.Browser.VerNum=parseFloat(owl.Browser.Version),owl.Number=function(){var o=/[^0-9-.]/g;return{toInt:function(e){var t=String(e);t=t.replace(o,"");var n=parseInt(t,10);return isNaN(n)?0:n},Sign:function(e){return isNaN(e)&&(e=0),Math.min(1,Math.max(-1,e))}}}(),owl.String=function(){var t=/^\s*|\s*$/g,n=/[^\w|\s|@|&|.|,|!|%|(|)|+|-]/g,o=/[_|\s]+/g;function r(e){return String(e).replace(t,"")}return{Trim:r,Clean:function(e){return r(String(e).replace(n,"").replace(o," "))},Pad:function(e,t,n){for(e=String(e),t=owl.Number.toInt(t),void 0===n?n=" ":(n=String(n)).length<1&&(n=" ");e.length<t;)e=n+e;return e},Format:function(e,t){if("string"==typeof t&&(t=[t]),t&&t.length)for(var n=0,o=t.length;n<o;n++)e=e.replace(new RegExp("(^|[^%])%"+n+"([^0-9]|$)","g"),"$1"+t[n]+"$2");return e}}}(),owl&&!owl.Array&&(owl.Array=function(){function n(e){return!(!e||e.constructor!=Array)}return{Is:n,Push:function(e,t){e[e.length]=t},Pop:function(e){var t=null;return 0<e.length&&(t=e[e.length-1],e.length--),t},Make:function(e,t){return e?n(e)?e:[e]:void 0===t?[]:n(t)?t:[t]}}}()),owl.Each=function(e,t){if(e.length)for(var n=0,o=e.length,r=e[0];n<o&&!1!==t(r,n);r=e[++n]);else for(var l in e)if(!1===t(e[l],l))break},owl.Property=function(){function n(e,t){return e&&e.owlP&&void 0!==e.owlP[t]}return{Set:function(e,n,o){owl.Each(owl.Array.Make(e),function(e){var t;(t=e).owlP||(t.owlP={},t.owlP.length=0),e.owlP[n]=o,e.owlP.length++})},Get:function(e,t){return n(e,t)?e.owlP[t]:null},Exists:n,Delete:function(e,t){owl.Each(owl.Array.Make(e),function(e){e.owlP&&e.owlP[t]&&(delete e.owlP[t],e.owlP.length--,0==e.owlP.length&&(e.owlP=null))})}}}(),owl.Object=function(){function Exists(e,t){return void 0!==e[t]}function PropertyExists(e,t){var n=typeof e[t];return"undefined"!=n&&"function"!=n}function MethodExists(e,t){return"function"==typeof e[t]}function Serialize(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,o,r=[],l=owl.Array.Is(e);for(n in e)"string"==(t=typeof(o=e[n]))?o='"'+o+'"':"object"==t&&null!==o&&(o=owl.Object.Serialize(o)),r.push((l?"":'"'+n+'":')+String(o));return(l?"[":"{")+String(r)+(l?"]":"}")}function DeSerialize(serial){return""===serial&&(serial='""'),eval("var ret = "+serial+";"),ret}return{Exists:Exists,PropertyExists:PropertyExists,MethodExists:MethodExists,Serialize:Serialize,DeSerialize:DeSerialize}}()}if(owl&&!owl.Css&&(owl.Css={ClassExists:function(e,n){var o=!0;return n&&owl.Each(owl.Array.Make(e),function(e){var t=" "+e.className+" ";return o=0<=t.indexOf(" "+n+" ")}),o},ClassApply:function(e,n){owl.Each(owl.Array.Make(e),function(e){var t=" "+e.className+" ";t.indexOf(" "+n+" ")<0&&(t+=n,e.className=owl.String.Trim(t))})},ClassRemove:function(e,n){owl.Each(owl.Array.Make(e),function(e){var t="";n&&(t=" "+e.className+" ",t=owl.String.Trim(t.replace(new RegExp(" "+n+" ","gi")," "))),e.className=t})},Opacity:function(e,t,n){var o=(t=Math.min(Math.max(t,0),99.999999))/100;owl.Each(owl.Array.Make(e),function(e){!1!==n&&("hidden"==e.style.visibility?0<t&&(e.style.visibility="visible"):0==t&&(e.style.visibility="hidden")),e.style.opacity=o,e.style.MozOpacity=o,e.style.filter="alpha(opacity:"+t+")",e.style.KHTMLOpacity=o})},ComputedStyle:function(e,t){var n="";return e&&(document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t])),n}}),owl&&owl.Browser&&owl.Browser.IE&&6==Math.floor(owl.Browser.VerNum))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}owl&&owl.Css&&!owl.Dom&&document.getElementById&&document.getElementsByTagName&&(owl.Dom=function(){var c=1,a=3,w=/[^\w|\s|\-|#|\.|,|\[|\]|=|~|!|*]/g,h=/\s+/g,m=/^[^#|\.|\[]*/,E=/#[^#|\.|\[]+/,y=/\.[^#|\.|\[]+/,C=/\[(.+)\]/,S=/([~|!|*]*=)/,g=owl.Array,p=[document];function d(e,t){var n,o,r,l,a,i,s,c,u=[],w={Tag:"",ID:"",Class:"",AttribCheck:function(){return!0}};w.Tag=m.exec(e),w.Tag=w.Tag?w.Tag[0].toLowerCase():"*",""==w.Tag&&(w.Tag="*"),w.ID=E.exec(e),w.ID=w.ID?w.ID[0].substr(1):"",w.Class=y.exec(e),w.Class=w.Class?w.Class[0].substr(1):"";var h=C.exec(e);if(h){h=h[1];var g,p=null,d=S.exec(h);if(d=d?d[1]:null){var f=h.indexOf(d);g=h.substr(0,f),p=h.substr(f+d.length)}else g=h;w.AttribCheck=function(e){var t;switch(g){case"class":t=e.className;break;case"for":t=e.htmlFor;break;default:t=e.getAttribute(g)}return""==(t=t||"")&&(!d||"!="==d)||!d||"="==d&&t==p||"!="==d&&t!=p||"*="==d&&0<=t.indexOf(p)||"~="==d&&0<=(" "+t+" ").indexOf(" "+p+" ")}}for(r=0,l=t.length;r<l;r++){if(n=[],w.ID)!(o=document.getElementById(w.ID))||"*"!=w.Tag&&o.nodeName.toLowerCase()!=w.Tag||w.Class&&!owl.Css.ClassExists(o,w.Class)||!w.AttribCheck(o)||(n[0]=o);else{var v=function(e){return("*"==w.Tag||e.nodeName.toLowerCase()==w.Tag)&&(""==w.Class||owl.Css.ClassExists(e,w.Class))&&w.AttribCheck(e)};if("*"==w.Tag)n=I(t[r],0,v);else for(s=0,c=(o=t[r].getElementsByTagName(w.Tag)).length;s<c;s++)v(o[s])&&(n[n.length]=o[s])}for(a=0,i=n.length;a<i;a++)u[u.length]=n[a]}return u}function I(e,a,i){var s=function(e,t){var n,o,r,l=[];for(t||(t=1),n=0,o=e.childNodes.length;n<o;n++)(r=e.childNodes[n]).nodeType==c&&"!"!=r.nodeName&&(i&&!i(r)||(l[l.length]=r),0<e.childNodes.length&&(!a||t<a)&&(l=l.concat(s(r,t++))));return l};e=g.Make(e,p);var t=[];return owl.Each(e,function(e){t=t.concat(s(e))}),t}function s(e){owl.Each(g.Make(e,p),function(e){I(e,null,function(e){return e.id&&e.removeAttribute("id"),!0})})}function u(e){owl.Each(g.Make(e,p),function(e){for(;e.lastChild;)e.removeChild(e.lastChild)})}return{ElementNode:c,AttributeNode:2,TextNode:a,CommentNode:8,Get:function(e,t){t=g.Make(t,p),e=owl.String.Trim(String(e).replace(w,"").replace(h," "));var n,o,r,l,a,i,s=[],c=e.split(",");for(r=0,l=c.length;r<l;r++){n=owl.String.Trim(c[r]);var u=t.slice();for(a=0,i=(o=n.split(" ")).length;a<i;a++)0<t.length&&(u=d(o[a],u));owl.Each(u,function(e){g.Push(s,e)})}return s},Descendents:I,Ancestors:function(e,n){var o=[];return n=n.toLowerCase()||"div",owl.Each(g.Make(e),function(e,t){for(;e.nodeName.toLowerCase()!=n&&e.parentNode;)e=e.parentNode;o[t]=e.nodeName.toLowerCase()==n?e:null}),owl.Array.Is(e)||(o=o[0]),o},Clone:function(l,e,a,i){l=g.Make(l,p),e=g.Make(e,p),owl.Each(e,function(e,t){i&&u(e);for(var n=Math.min(t,l.length-1),o=0,r=l[n].childNodes.length;o<r;o++)e.appendChild(l[n].childNodes[o].cloneNode(!0));a?u(l[n]):s(e)})},RemoveIDs:s,RemoveChildren:u,Text:function(e,r){var l=void 0!==r;return r=l?"string"==typeof r?[r]:r:"",owl.Each(g.Make(e,p),function(e,t){var n=function e(t){for(var n=!1,o=0,r=t.childNodes.length;o<r&&!n;o++)n=t.childNodes[o].nodeType==a?t.childNodes[o]:e(t.childNodes[o]);return n}(e);if(l){var o=r[Math.min(t,r.length-1)];n?n.nodeValue=o:n=e.appendChild(document.createTextNode(o))}else n&&(r+=(""==r?"":"\n")+n.nodeValue)}),!!l||r}}}()),owl&&!owl.Event&&(owl.Event=function(n,o,t,r){n=owl.Array.Make(n,[window]),t="function"==typeof t?t:null,r=r||0==r?owl.Number.toInt(r):null;var l=[];owl.Each(n,function(e){l[l.length]=owl.EventRegister.Add(e,o,t,r)}),this.Detach=function(){for(var e=0,t=n.length;e<t;e++)owl.EventRegister.Detach(n[e],o,l[e],!0)}},owl.EventRegister=function(){var s=[],c=[],a=[],u=0,i=!1,w="EventRegister";function h(e,t,n){for(var o=[],r=0,l=c[n].length;r<l;r++)null!=c[n][r].Handler&&(o[o.length]={Index:r,Priority:c[n][r].Priority});0<o.length?o.sort(function(e,t){return e.Priority-t.Priority}):(e["on"+t]=null,delete e.owlP[w][t],o=null),a[n]=o,i=!1}return{Namespace:w,Add:function(e,t,n,o){var r=owl.Property.Get(e,w);if(r||(r={},s[s.length]=e),!r[t]){c[++u]=[],r[t]=u,owl.Property.Set(e,w,r);var l=e["on"+t];l&&new owl.Event(e,t,l),e["on"+t]=owl.EventRegister.Handler,1==u&&new owl.Event(window,"unload",owl.EventRegister.CleanUp,1e100)}var a=r[t],i=c[a].length;return c[a][i]={Handler:n,Priority:o},h(e,t,a),{Reg:a,Func:i}},Handler:function(e){var t=!0,n=new owl.EventInformation(this,e);if(n.Index&&n.Index.Reg)for(var o=a[n.Index.Reg].slice(),r=0,l=o.length;r<l;r++)n.Index.Func=o[r].Index,n.AllowNext&&c[n.Index.Reg][n.Index.Func].Handler&&(t&=!1!==c[n.Index.Reg][n.Index.Func].Handler(n));return i&&h(n.Element,n.Type,n.Index.Reg),t},Detach:function(e,t,n,o){c[n.Reg][n.Func].Handler=null,o?h(e,t,n.Reg):i=!0},CleanUp:function(){for(var e=0,t=s.length,n=s[0];e<t;n=s[++e]){for(var o in owl.Property.Get(n,w))n["on"+o]=null;owl.Property.Delete(n,w)}a=c=s=null}}}(),owl.EventInformation=function(e,t){this.Element=e,this.Event=t||window.event,this.Event&&(this.Type=this.Event.type.toLowerCase(),this.Target=this.Event.target?this.Event.target:this.Event.srcElement,this.Index={Reg:this.Element.owlP[owl.EventRegister.Namespace][this.Type],Func:null},this.AllowNext=!0)},owl.EventInformation.prototype.Key=function(){if(!this.KeySet&&(this.KeySet={Pressed:"",Function:"",Shift:this.Event.shiftKey,Ctrl:this.Event.ctrlKey,Alt:this.Event.altKey},owl.EventKey.test(this.Type))){var e=this.Event.keyCode,t=void 0!==this.Event.charCode?this.Event.charCode:null;0<t?this.KeySet.Pressed=String.fromCharCode(t):owl.EventCK[e]&&(null!=t||e<32||"keypress"!=this.Type||!this.Shift&&e<112&&35!=e&&39!=e&&45!=e&&46!=e)?this.KeySet.Function=owl.EventCK[e]:32<=e&&(this.KeySet.Pressed=String.fromCharCode(e))}return this.KeySet},owl.EventInformation.prototype.Mouse=function(){return this.MouseSet||(this.MouseSet={X:0,Y:0},owl.EventMouse.test(this.Type)&&(this.MouseSet.X=this.Event.pageX?this.Event.pageX:this.Event.clientX+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),this.MouseSet.Y=this.Event.pageY?this.Event.pageY:this.Event.clientY+Math.max(document.documentElement.scrollTop,document.body.scrollTop))),this.MouseSet},owl.EventInformation.prototype.Detach=function(){owl.EventRegister.Detach(this.Element,this.Type,this.Index)},owl.EventInformation.prototype.StopHandlers=function(){this.AllowNext=!1},owl.EventInformation.prototype.StopPropagation=function(){this.Event.stopPropagation&&this.Event.stopPropagation(),this.Event.cancelBubble=!0},owl.EventInformation.prototype.StopDefaultAction=function(){this.Event.preventDefault&&this.Event.preventDefault(),this.Event.returnValue=!1},owl.EventKey=/^key/i,owl.EventMouse=/mouse|click/i,owl.EventCK=[],owl.EventCK[8]="backspace",owl.EventCK[9]="tab",owl.EventCK[13]="enter",owl.EventCK[19]="break",owl.EventCK[27]="esc",owl.EventCK[33]="pageup",owl.EventCK[34]="pagedown",owl.EventCK[35]="end",owl.EventCK[36]="home",owl.EventCK[37]="left",owl.EventCK[38]="up",owl.EventCK[39]="right",owl.EventCK[40]="down",owl.EventCK[45]="insert",owl.EventCK[46]="delete",owl.EventCK[112]="f1",owl.EventCK[113]="f2",owl.EventCK[114]="f3",owl.EventCK[115]="f4",owl.EventCK[116]="f5",owl.EventCK[117]="f6",owl.EventCK[118]="f7",owl.EventCK[119]="f8",owl.EventCK[120]="f9",owl.EventCK[121]="f10",owl.EventCK[122]="f11",owl.EventCK[123]="f12",owl.EventCK[144]="numlock",owl.EventCK[145]="scrolllock",history&&history.navigationMode&&(history.navigationMode="compatible")),owl&&!owl.Image&&(owl.Image={Load:function(e,t){var n=new Image;n.src=e,t&&(n.complete?t(n):n.onload=function(){t(n)})},IEpng:function(e,t,n){owl.Browser.IE&&5.5<=owl.Browser.VerNum&&owl.Browser.VerNum<7&&(n||(n="crop"),owl.Each(owl.Array.Make(e),function(e){"img"==e.nodeName.toLowerCase()&&(e.src="images/spacer.gif"),e.style.backgroundImage="none",e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='"+n+"')"}))}});var ph=ph||{};ph.Initialise=function(){ph.Setup={EmailNode:"a.email",Contact:{Form:"#enquiry",ErrorClass:"error",Check:[{Field:"#name",Validate:ph.Validate.String,Req:!0,Min:1,Max:80},{Field:"#telephone",Validate:ph.Validate.String,Req:!1,Min:6,Max:20,Additonal:function(e){var t=!0;if(""==e){var n=owl.Dom.Get("#email");1==n.length&&(t=ph.Validate.Email(n[0].value,!0,6,80))}return t}},{Field:"#email",Validate:ph.Validate.Email,Req:!1,Min:6,Max:80,Additonal:function(e){var t=!0;if(""==e){var n=owl.Dom.Get("#telephone");1==n.length&&(t=6<=owl.String.Trim(n[0].value).length)}return t}}]},Map:{Element:"#map",ActiveClass:"active",center:{lat:50.5472179,lng:-3.4945563},Zoom:17,Type:"roadmap",Title:"Peninsula",API:"AIzaSyBV8GzovNv6hkSD2E1mQ62JpxiTrH_F0Ng"},Analytics:"UA-20463167-1"}},ph.Start=function(){ph.Initialise(),ph.EmailParse(),new ph.Validator(ph.Setup.Contact),ph.Map(),ph.Analytics(),owl.Image.IEpng(owl.Dom.Get("#hearing-model"),"images/main/hidden-hearing-aid.png"),owl.Image.IEpng(owl.Dom.Get("#hearing-aid"),"images/main/hearing-aid.png"),owl.Image.IEpng(owl.Dom.Get("#laurie-mckenna"),"images/main/laurie-mckenna.png"),owl.Image.IEpng(owl.Dom.Get("#teignmouth"),"images/main/teignmouth.png")},new owl.Event(window,"load",ph.Start,0),ph.EmailParse=function(){owl.Each(owl.Dom.Get(ph.Setup.EmailNode),function(e){if(e.firstChild){var t=e.firstChild.nodeValue;t=(t=(t=t.replace(/dot/gi,".")).replace(/\{at\}/gi,"@")).replace(/\s/g,""),e.href="mailto:"+t,owl.Dom.Text(e,t)}})},ph.Validator=function(e){var t=owl.Dom.Get(e.Form);if(1==t.length){this.Form=t[0],this.ErrorClass=e.ErrorClass,this.Fields=e.Check;var n=this;new owl.Event(t,"submit",function(e){n.Check(e)},0)}},ph.Validator.prototype.Check=function(e){var r=!0,l=this.Form,a=this.ErrorClass;return owl.Each(this.Fields,function(e){var t=owl.Dom.Get(e.Field,l);if(1==t.length&&(t=t[0]),t&&e.Validate){var n=owl.String.Trim(t.value);n!=t.value&&(t.value=n);var o=e.Validate(n,e.Req,e.Min,e.Max);e.Additonal&&(o&=e.Additonal(n)),o?owl.Css.ClassRemove(t.parentNode,a):(r&&t.select&&t.focus&&(t.select(),t.focus()),owl.Css.ClassApply(t.parentNode,a),r=!1)}}),r||(e.StopDefaultAction(),e.StopHandlers()),r},ph.Validate=function(){var r=/^[^@]+@[a-z0-9]+([_\.\-]{0,1}[a-z0-9]+)*([\.]{1}[a-z0-9]+)+$/;return{String:function(e,t,n,o){return!t||e&&(!n||e.length>=n)&&(!o||e.length<=o)},Email:function(e,t,n,o){return""!=(e=e.toLowerCase())&&(!n||e.length>=n)&&(!o||e.length<=o)&&""==e.replace(r,"")||!t&&""==e}}}(),ph.Map=function(){var e=ph.Setup.Map;if(1==owl.Dom.Get(e.Element).length){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key="+e.API+"&callback=ph.mapStart",t.async=1,document.head.appendChild(t)}},ph.mapStart=function(){var e=ph.Setup.Map,t=owl.Dom.Get(e.Element)[0];owl.Css.ClassApply(t,e.ActiveClass);var n=new google.maps.Map(t,{center:e.center,zoom:e.Zoom,mapTypeId:e.Type});new google.maps.Marker({position:e.center,map:n})};var _gaq=_gaq||[];ph.Analytics=function(){if(0<=location.host.indexOf(".co")){_gaq.push(["_setAccount",ph.Setup.Analytics]),_gaq.push(["_trackPageview"]);var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",document.getElementsByTagName("head")[0].appendChild(e)}};
